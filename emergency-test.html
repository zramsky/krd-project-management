<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-btn {
            width: 100%;
            padding: 20px;
            font-size: 18px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 10px;
            margin: 10px 0;
            cursor: pointer;
        }
        .test-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Emergency JavaScript Test</h1>
    
    <button class="test-btn" onclick="alert('Basic onclick works!')">Test 1: Basic Alert</button>
    
    <button class="test-btn" id="test2">Test 2: Event Listener</button>
    
    <button class="test-btn" id="test3">Test 3: Notes Function</button>
    
    <div id="log" style="margin-top: 20px; padding: 10px; background: white; border: 1px solid #ddd;">
        <strong>Debug Log:</strong><br>
        <div id="logContent">Loading...</div>
    </div>
    
    <script>
        // Log function
        function log(message) {
            const logContent = document.getElementById('logContent');
            logContent.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
        }
        
        log('JavaScript loaded successfully');
        
        // Test 2: Event listener
        document.getElementById('test2').addEventListener('click', function() {
            alert('Event listener works!');
            log('Event listener clicked');
        });
        
        // Simple notes function
        function testNotesFunction() {
            alert('Test notes function called!');
            log('Test notes function executed');
        }
        
        // Test 3: Notes function
        document.getElementById('test3').addEventListener('click', testNotesFunction);
        document.getElementById('test3').onclick = testNotesFunction;
        
        log('All event handlers setup complete');
        
        // Test if we can access the main app
        setTimeout(() => {
            try {
                const mainWindow = window.parent || window.opener || window;
                if (mainWindow.projects) {
                    log('Found projects in main window: ' + mainWindow.projects.length);
                } else {
                    log('No projects found in main window');
                }
            } catch (e) {
                log('Error accessing main window: ' + e.message);
            }
        }, 1000);
    </script>
</body>
</html>